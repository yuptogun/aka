# 자습 일지: 2일차 2024-04-01

## 앞으로의 방향에 대해

2일차인데 숫자 자체는 벌써 한 달을 넘겨 버렸다 ㅜ [memmo](https://memmo.cc) 한다고 정신이 없었다는 변명을 해본다.

원래 계획은 다음과 같았다.
1. 프로젝트 구성을 한다. 일단은 헬로월드겠지만 아무튼 풀스택을 구현한다.
2. 기능 구현을 한다.

근데 바꿔야 할 거 같다.
1. 기능 구현을 한다. 일단은 헤드리스겠지만 아무튼 NestJS를 배운다.
2. 프로젝트 구성을 한다.

왜 그러냐면... 이렇게 저렇게 찾아보며 눈치를 보자니... 아무래도 Node 풀스택은 이런 느낌으로 가는것 같아서다.

```
my-app/
    backend/
        .env
        package.json
    frontend/
        .env
        package.json
```

말은 맞는데 라라벨 하던 사람 입장에서는 좀 멋이 없긴 하다.  
frontend 쪽에서 build 돌릴때 `backend/public/dist/`에 빌드시키라는 식으로 돌리게 되겠지?

그래서... 당분간은 Vite 안 건드리고... NestJS에 전념하기로 한다.  
일단 기능 구현을 하기로 하자.  
URL 단축서비스에 기능이 있으면 얼마나 있다구 그지?

## 개발컨테이너 약간 수정

Windows + WSL2 + 개발컨테이너 = 좀 짜증 이었다.  
결과적으로 현재의 `devcontainer.json`은 다음과 같이 수정되었다.

```json
// 안 바뀐 부분은 생략
{
    "mounts": [
		"source=${localEnv:HOME}/.ssh,target=/home/node/.ssh,type=bind,consistency=cached"
	]
	// "features": {
	// 	"ghcr.io/devcontainers-contrib/features/pnpm:2": {}
	// }
	// "appPort": [ "3000:3000" ]
}
```

- 컨테이너 안에서 `git push`를 작동시키기 위해 호스트의 `id_rsa` 파일이 있는 위치를 마운트한다.
    - 그리고 github에는 `id_rsa.pub`을 등록해놨다.
    - `target` 경로가 컨테이너를 실행하는 유저의 홈 디렉토리인지 확인할 것.
- pnpm은 현실적으로 지금 쓰고 있지 않은 관계로 그냥 지웠다. 대역폭 전송은 1kb라도 줄이자.
- 포트 포워딩 관련해서는 구태여 "정적으로 할당"할 필요 없이 자동으로 처리하도록 두는 편이 나을 것 같다.
    - 컨테이너 안에서 실제로 해당 포트 점유하는 앱 프로세스가 안 뜨면, "앱이 안 뜬 건지 네트워크가 문제인 건지" 알아내는 데 오래 걸린다. ~~알고 싶지 않았다~~

## 3일차 계획

PostgreSQL 붙여서 CRUD 중 C 구현

> 수정/삭제 인가 계획: 로그인을 안 했을 때는 1회용 토큰 제공. 로그인을 했을 때는 소유권만 확인.